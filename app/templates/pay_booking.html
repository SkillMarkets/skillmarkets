{% extends "base.html" %}
{% block title %}–û–ø–ª–∞—Ç–∞ ‚Äî SkillMarkets{% endblock %}
{% block content %}
<div class="card">
    <h2>üí≥ –û–ø–ª–∞—Ç–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</h2>
    <p><strong>–£—Å–ª—É–≥–∞:</strong> {{ booking.offer.title }}</p>
    <p><strong>–†–µ–ø–µ—Ç–∏—Ç–æ—Ä:</strong> {{ booking.tutor.username }}</p>
    <p><strong>–°—É–º–º–∞:</strong> <span style="font-size:1.4rem; font-weight:bold; color:var(--primary);">$ {{ booking.offer.price_per_hour }}</span></p>

    <div id="payment-element" style="margin:25px 0; padding:15px; border:1px solid #ddd; border-radius:8px;"></div>
    <button id="submit" class="btn" style="width:100%;">–û–ø–ª–∞—Ç–∏—Ç—å —Å–µ–π—á–∞—Å</button>
</div>

<script src="https://js.stripe.com/v3/"></script>
<script>
  const stripe = Stripe('{{ stripe_public_key }}');
  const elements = stripe.elements();
  const paymentElement = elements.create('payment');
  paymentElement.mount('#payment-element');

  document.getElementById('submit').addEventListener('click', async (e) => {
    e.preventDefault();
    const { error } = await stripe.confirmPayment({
      elements,
      confirmParams: {
        return_url: '{{ url_for("main.profile") }}'
      }
    });
    if (error) {
      alert('–û—à–∏–±–∫–∞: ' + error.message);
    }
  });
</script>
{% endblock %}